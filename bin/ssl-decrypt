#!/bin/bash
set -e

# this script depends on:
#  - openssl
#  - encryption key
#

if [[ "$#" -ne 3 ]]
  then
        echo "Usage: $0 encryption_key_file infile outfile" >&2
        exit 127
fi
ENCRYPTION_KEY="$1"
INFILE="$2"
OUTFILE="$3"

openssl enc -d -aes-256-cbc -salt -md md5 -pass file:${ENCRYPTION_KEY} -in ${INFILE} -out ${OUTFILE}
